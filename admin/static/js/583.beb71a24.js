"use strict";(self["webpackChunkryadminback"]=self["webpackChunkryadminback"]||[]).push([[583],{6619:function(e,t,a){a.d(t,{A:function(){return n}});var l=a(5918),o=(0,l.defineComponent)({__name:"DrawerList",props:{modelValue:{type:Boolean},size:{default:"80%"}},setup(e){return(e,t)=>{const a=(0,l.resolveComponent)("el-drawer");return(0,l.openBlock)(),(0,l.createBlock)(a,{"model-value":e.modelValue,size:e.size},{default:(0,l.withCtx)((()=>[(0,l.renderSlot)(e.$slots,"default")])),_:3},8,["model-value","size"])}}});const r=o;var n=r},4809:function(e,t,a){a.d(t,{A:function(){return c}});var l=a(5918);const o={class:"flex-row flex-align-center"};var r=(0,l.defineComponent)({__name:"ListContent",props:{total:{default:0},data:{default:()=>[]}},emits:["reload","change"],setup(e,{emit:t}){const a=t;return(e,t)=>{const r=(0,l.resolveComponent)("el-card"),n=(0,l.resolveComponent)("el-table"),c=(0,l.resolveComponent)("el-button"),d=(0,l.resolveComponent)("el-pagination");return(0,l.openBlock)(),(0,l.createElementBlock)("div",null,[e.$slots.header?((0,l.openBlock)(),(0,l.createBlock)(r,{key:0},{default:(0,l.withCtx)((()=>[(0,l.renderSlot)(e.$slots,"header")])),_:3})):(0,l.createCommentVNode)("",!0),(0,l.createVNode)(n,{stripe:"",border:"",data:e.data,style:{width:"100%"}},{default:(0,l.withCtx)((()=>[(0,l.renderSlot)(e.$slots,"default")])),_:3},8,["data"]),(0,l.createElementVNode)("div",o,[(0,l.createVNode)(c,{size:"small",onClick:t[0]||(t[0]=e=>a("reload"))},{default:(0,l.withCtx)((()=>[(0,l.createTextVNode)("刷新")])),_:1}),(0,l.createTextVNode)(),(0,l.createVNode)(d,{layout:"prev, pager, next",total:e.total,background:"#00000000",onChange:t[1]||(t[1]=e=>a("change"))},null,8,["total"])])])}}});const n=r;var c=n},6583:function(e,t,a){a.r(t),a.d(t,{default:function(){return B}});var l=a(5918),o=a(1409),r=a(4809),n=a(6619),c=(0,l.defineComponent)({__name:"ViewAccount",props:{modelValue:{},model:{}},emits:["update:model-value"],setup(e,{emit:t}){const a=t,c=e,d=(0,l.toRef)(c,"modelValue"),u=((0,l.ref)(0),(0,l.ref)([])),i=async()=>{try{const e=await o.pV.partnerBackAccount(c.model.id);u.value=Object.keys(e).map((t=>({coin:t,...e[t]}))),console.log(u.value)}catch(e){}};return(0,l.watch)(d,(()=>{d.value&&i()}),{immediate:!0}),(e,t)=>{const o=(0,l.resolveComponent)("el-table-column");return(0,l.openBlock)(),(0,l.createBlock)(n.A,{"model-value":e.modelValue,onClose:t[0]||(t[0]=e=>a("update:model-value",!1))},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(r.A,{data:u.value,onReload:i},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(o,{label:"ID",prop:"id"}),(0,l.createVNode)(o,{label:"当前币种",prop:"coin"}),(0,l.createVNode)(o,{label:"待入账",prop:"toBeCredited"}),(0,l.createVNode)(o,{label:"冻结",prop:"hold"}),(0,l.createVNode)(o,{label:"可用",prop:"available"}),(0,l.createVNode)(o,{label:"提现",prop:"withdraw"}),(0,l.createVNode)(o,{label:"创建时间",prop:"createdTime"}),(0,l.createVNode)(o,{label:"更新时间",prop:"updatedTime"}),(0,l.createVNode)(o,{label:"删除时间",prop:"deletedTime"})])),_:1},8,["data"])])),_:1},8,["model-value"])}}});const d=c;var u=d,i=(0,l.defineComponent)({__name:"ViewInfo",props:{modelValue:{type:Boolean},model:{}},emits:["update:model-value"],setup(e,{emit:t}){const a=t,r=e,c=(0,l.toRef)(r,"modelValue"),d=(0,l.ref)(),u=async()=>{try{const e=await o.pV.partnerBackInfo(r.model.id);d.value=e}catch(e){console.log(e)}};return(0,l.watch)(c,(()=>{c.value&&u()})),(e,t)=>{const o=(0,l.resolveComponent)("el-descriptions-item"),r=(0,l.resolveComponent)("el-descriptions");return(0,l.openBlock)(),(0,l.createBlock)(n.A,{"model-value":c.value,onClose:t[0]||(t[0]=e=>a("update:model-value",!1))},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(r,{title:"合伙人信息",border:""},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(o,{label:"ID"},{default:(0,l.withCtx)((()=>[(0,l.createTextVNode)((0,l.toDisplayString)(d.value?.id),1)])),_:1}),(0,l.createVNode)(o,{label:"真实姓名"},{default:(0,l.withCtx)((()=>[(0,l.createTextVNode)((0,l.toDisplayString)(d.value?.realName),1)])),_:1}),(0,l.createVNode)(o,{label:"用户名"},{default:(0,l.withCtx)((()=>[(0,l.createTextVNode)((0,l.toDisplayString)(d.value?.userName),1)])),_:1}),(0,l.createVNode)(o,{label:"邀请码"},{default:(0,l.withCtx)((()=>[(0,l.createTextVNode)((0,l.toDisplayString)(d.value?.userCode),1)])),_:1}),(0,l.createVNode)(o,{label:"城市"},{default:(0,l.withCtx)((()=>[(0,l.createTextVNode)((0,l.toDisplayString)(d.value?.city),1)])),_:1}),(0,l.createVNode)(o,{label:"组织"},{default:(0,l.withCtx)((()=>[(0,l.createTextVNode)((0,l.toDisplayString)(d.value?.organization),1)])),_:1}),(0,l.createVNode)(o,{label:"状态"},{default:(0,l.withCtx)((()=>[(0,l.createTextVNode)((0,l.toDisplayString)(d.value?.status),1)])),_:1}),(0,l.createVNode)(o,{label:"证书"},{default:(0,l.withCtx)((()=>[(0,l.createTextVNode)((0,l.toDisplayString)(d.value?.certificates),1)])),_:1}),(0,l.createVNode)(o,{label:"创建"},{default:(0,l.withCtx)((()=>[(0,l.createTextVNode)((0,l.toDisplayString)(d.value?.createdTime),1)])),_:1}),(0,l.createVNode)(o,{label:"更新"},{default:(0,l.withCtx)((()=>[(0,l.createTextVNode)((0,l.toDisplayString)(d.value?.updatedTime),1)])),_:1})])),_:1})])),_:1},8,["model-value"])}}});const s=i;var p=s,m=(0,l.defineComponent)({__name:"ViewBankCard",props:{modelValue:{type:Boolean},model:{}},emits:["update:model-value"],setup(e,{emit:t}){const a=t,c=e,d=(0,l.toRef)(c,"modelValue"),u=(0,l.ref)(0),i=(0,l.ref)([]),s=async()=>{try{const{records:e,total:t}=await o.pV.partnerBackBankCards(c.model.id);i.value=e,u.value=t}catch(e){console.log(e)}};return(0,l.watch)(d,(()=>{d.value&&s()})),(e,t)=>{const o=(0,l.resolveComponent)("el-table-column");return(0,l.openBlock)(),(0,l.createBlock)(n.A,{"model-value":e.modelValue,onClose:t[0]||(t[0]=e=>a("update:model-value",!1))},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(r.A,{data:i.value,total:u.value,onReload:s},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(o,{label:"ID"}),(0,l.createVNode)(o,{label:"名称",prop:"name"}),(0,l.createVNode)(o,{label:"银行名称",prop:"bankName"}),(0,l.createVNode)(o,{label:"分行名称",prop:"branchName"}),(0,l.createVNode)(o,{label:"卡号",prop:"cardNo"}),(0,l.createVNode)(o,{label:"手机号",prop:"phone"}),(0,l.createVNode)(o,{label:"swiftCode",prop:"swiftCode"})])),_:1},8,["data","total"])])),_:1},8,["model-value"])}}});const V=m;var v=V,f=(0,l.defineComponent)({__name:"ViewAccountBill",props:{modelValue:{},model:{}},emits:["update:model-value"],setup(e,{emit:t}){const a=t,c=e,d=(0,l.toRef)(c,"modelValue"),u=(0,l.ref)(0),i=(0,l.ref)(1),s=(0,l.ref)([]),p=async()=>{try{const{total:e,records:t}=await o.pV.partnerBackBills(i.value,c.model.id,{});console.log(e,t),s.value=t,u.value=e}catch(e){console.log(e)}};return(0,l.watch)(d,(()=>{d.value&&p()})),(e,t)=>{const o=(0,l.resolveComponent)("el-table-column");return(0,l.openBlock)(),(0,l.createBlock)(n.A,{"model-value":e.modelValue,onClose:t[1]||(t[1]=e=>a("update:model-value",!1)),size:"90%"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(r.A,{data:s.value,onReload:p,onChange:t[0]||(t[0]=e=>(i.value++,p()))},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(o,{label:"ID",prop:"id"}),(0,l.createVNode)(o,{label:"数量",prop:"providerBill.amount"}),(0,l.createVNode)(o,{label:"改变"},{default:(0,l.withCtx)((({row:{providerBill:e}})=>[(0,l.createElementVNode)("span",null,(0,l.toDisplayString)("increase"==e.changes?"减少":"增加"),1)])),_:1}),(0,l.createVNode)(o,{label:"币种",prop:"providerBill.currency"}),(0,l.createVNode)(o,{label:"描述",prop:"providerBill.desc"}),(0,l.createVNode)(o,{label:"奖励类型",prop:"providerBill.relatedTp"}),(0,l.createVNode)(o,{label:"订单号",prop:"providerBill.relatedInfo.OrderNo"}),(0,l.createVNode)(o,{label:"时间",prop:"providerBill.month"}),(0,l.createVNode)(o,{label:"是否结算",prop:"settled"},{default:(0,l.withCtx)((({row:e})=>[(0,l.createElementVNode)("span",null,(0,l.toDisplayString)(0==e.settled?"未结算":"已结算"),1)])),_:1}),(0,l.createVNode)(o,{label:"创建时间",prop:"createdTime"}),(0,l.createVNode)(o,{label:"更新时间",prop:"updatedTime"}),(0,l.createVNode)(o,{label:"删除时间",prop:"deletedTime"})])),_:1},8,["data"])])),_:1},8,["model-value"])}}});const C=f;var N=C,w=a(2933),k=a(7037),h=a(1095);const b=["src"];var x=(0,l.defineComponent)({__name:"ListView",setup(e){const{isPermission:t}=(0,h.storeToRefs)((0,k.UserPermissionStore)()),a=(0,l.ref)([]),n=(0,l.ref)(0),c=(0,l.ref)(1),d=async()=>{try{const{total:e,records:t}=await o.pV.partnerBackList(c.value,{});n.value=e,a.value=t}catch(e){}};(0,l.onMounted)(d);const i=(0,l.ref)(),s=(0,l.ref)(!1),m=e=>{i.value=e,s.value=!0},V=(0,l.ref)(!1),f=e=>{i.value=e,V.value=!0},C=(0,l.ref)(!1),x=e=>{i.value=e,C.value=!0},y=(0,l.ref)(!1),B=e=>{i.value=e,y.value=!0},_=async e=>{try{const{value:t,action:a}=await w.s.prompt("资金比例，万分位","资费配置",{confirmButtonText:"同意",cancelButtonText:"拒绝",distinguishCancelAndClose:!0,inputType:"number",inputValue:e.fundsPercent,inputErrorMessage:"无效输入",inputValidator:e=>parseInt(e)<=1e4||parseInt(e)>0,type:"warning",center:!0});if(parseInt(t)>1e4||parseInt(t)<0)return void(0,k.showError)("无效输入");await o.pV.partnerBackFundsPercentSet(e.id,parseInt(t)),(0,k.showSuccess)("success"),d()}catch(t){(0,k.showError)(t.message)}},g=async e=>{try{await w.s.confirm("是否通过审核","",{confirmButtonText:"同意",cancelButtonText:"拒绝",distinguishCancelAndClose:!0,type:"warning",center:!0}),await o.pV.partnerBackInfoCheck(e.id,!0),(0,k.showSuccess)("success"),d()}catch(t){if(console.log(t),"string"==typeof t){if("cancel"===t)try{await o.pV.partnerBackInfoCheck(e.id,!1),(0,k.showSuccess)("success"),d()}catch(t){(0,k.showError)(t.message)}return}(0,k.showError)(t.message)}},T=async e=>{try{await w.s.confirm("ok"==e.status?"确定设置禁止?":"确定设置正常?","",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}),await o.pV.partnerBackStatusSet(e.id,"ok"!=e.status),(0,k.showSuccess)("success"),d()}catch(t){if("string"==typeof t)return;(0,k.showError)(t.message)}};return(e,o)=>{const w=(0,l.resolveComponent)("el-table-column"),k=(0,l.resolveComponent)("el-button");return(0,l.openBlock)(),(0,l.createElementBlock)(l.Fragment,null,[(0,l.createVNode)(r.A,{data:a.value,total:n.value,onChange:o[0]||(o[0]=e=>(c.value++,d()))},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(w,{label:"ID",prop:"id"}),(0,l.createVNode)(w,{label:"头像"},{default:(0,l.withCtx)((({row:e})=>[(0,l.createElementVNode)("img",{class:"s-w-40",src:e.avatarUrl,alt:""},null,8,b)])),_:1}),(0,l.createVNode)(w,{label:"邀请码",prop:"userCode"}),(0,l.createVNode)(w,{label:"用户名",prop:"userName"}),(0,l.createVNode)(w,{label:"昵称",prop:"nickName"}),(0,l.createVNode)(w,{label:"邀请人",prop:"inviter"}),(0,l.createVNode)(w,{label:"等级",prop:"level"}),(0,l.createVNode)(w,{label:"分成",prop:"fundsPercent"}),(0,l.createVNode)(w,{label:"状态",prop:"status"}),(0,l.createVNode)(w,null,{default:(0,l.withCtx)((({row:e})=>[(0,l.unref)(t)("合伙人信息")?((0,l.openBlock)(),(0,l.createBlock)(k,{key:0,size:"small",onClick:t=>m(e)},{default:(0,l.withCtx)((()=>[(0,l.createTextVNode)("查看")])),_:2},1032,["onClick"])):(0,l.createCommentVNode)("",!0),"waiting"==e.status&&(0,l.unref)(t)("合伙人信息审核")?((0,l.openBlock)(),(0,l.createBlock)(k,{key:1,size:"small",type:"primary",onClick:t=>g(e)},{default:(0,l.withCtx)((()=>[(0,l.createTextVNode)("审核")])),_:2},1032,["onClick"])):(0,l.createCommentVNode)("",!0),(0,l.unref)(t)("合伙人账户")?((0,l.openBlock)(),(0,l.createBlock)(k,{key:2,size:"small",type:"primary",onClick:t=>f(e)},{default:(0,l.withCtx)((()=>[(0,l.createTextVNode)("查看账户")])),_:2},1032,["onClick"])):(0,l.createCommentVNode)("",!0),(0,l.unref)(t)("合伙人银行卡列表")?((0,l.openBlock)(),(0,l.createBlock)(k,{key:3,type:"warning",size:"small",onClick:t=>x(e)},{default:(0,l.withCtx)((()=>[(0,l.createTextVNode)("银行卡")])),_:2},1032,["onClick"])):(0,l.createCommentVNode)("",!0),(0,l.unref)(t)("合伙人状态设置")?((0,l.openBlock)(),(0,l.createBlock)(k,{key:4,type:"danger",size:"small",onClick:t=>T(e)},{default:(0,l.withCtx)((()=>[(0,l.createTextVNode)("修改状态设置")])),_:2},1032,["onClick"])):(0,l.createCommentVNode)("",!0),(0,l.unref)(t)("合伙人账单记录")?((0,l.openBlock)(),(0,l.createBlock)(k,{key:5,type:"default",size:"small",onClick:t=>B(e)},{default:(0,l.withCtx)((()=>[(0,l.createTextVNode)("查看账单")])),_:2},1032,["onClick"])):(0,l.createCommentVNode)("",!0),(0,l.unref)(t)("合伙人资费配置")?((0,l.openBlock)(),(0,l.createBlock)(k,{key:6,type:"default",size:"small",onClick:t=>_(e)},{default:(0,l.withCtx)((()=>[(0,l.createTextVNode)("资费配置")])),_:2},1032,["onClick"])):(0,l.createCommentVNode)("",!0)])),_:1})])),_:1},8,["data","total"]),(0,l.createVNode)(p,{modelValue:s.value,"onUpdate:modelValue":o[1]||(o[1]=e=>s.value=e),model:i.value},null,8,["modelValue","model"]),(0,l.createVNode)(u,{modelValue:V.value,"onUpdate:modelValue":o[2]||(o[2]=e=>V.value=e),model:i.value},null,8,["modelValue","model"]),(0,l.createVNode)(v,{modelValue:C.value,"onUpdate:modelValue":o[3]||(o[3]=e=>C.value=e),model:i.value},null,8,["modelValue","model"]),(0,l.createVNode)(N,{modelValue:y.value,"onUpdate:modelValue":o[4]||(o[4]=e=>y.value=e),model:i.value},null,8,["modelValue","model"])],64)}}});const y=x;var B=y}}]);