"use strict";(self["webpackChunkryadminback"]=self["webpackChunkryadminback"]||[]).push([[596],{6619:function(e,t,a){a.d(t,{A:function(){return r}});var l=a(5918),o=(0,l.defineComponent)({__name:"DrawerList",props:{modelValue:{type:Boolean},size:{default:"80%"}},setup(e){return(e,t)=>{const a=(0,l.resolveComponent)("el-drawer");return(0,l.openBlock)(),(0,l.createBlock)(a,{"model-value":e.modelValue,size:e.size},{default:(0,l.withCtx)((()=>[(0,l.renderSlot)(e.$slots,"default")])),_:3},8,["model-value","size"])}}});const n=o;var r=n},4809:function(e,t,a){a.d(t,{A:function(){return c}});var l=a(5918);const o={class:"flex-row flex-align-center"};var n=(0,l.defineComponent)({__name:"ListContent",props:{total:{default:0},data:{default:()=>[]}},emits:["reload","change"],setup(e,{emit:t}){const a=t;return(e,t)=>{const n=(0,l.resolveComponent)("el-card"),r=(0,l.resolveComponent)("el-table"),c=(0,l.resolveComponent)("el-button"),u=(0,l.resolveComponent)("el-pagination");return(0,l.openBlock)(),(0,l.createElementBlock)("div",null,[e.$slots.header?((0,l.openBlock)(),(0,l.createBlock)(n,{key:0},{default:(0,l.withCtx)((()=>[(0,l.renderSlot)(e.$slots,"header")])),_:3})):(0,l.createCommentVNode)("",!0),(0,l.createVNode)(r,{stripe:"",border:"",data:e.data,style:{width:"100%"}},{default:(0,l.withCtx)((()=>[(0,l.renderSlot)(e.$slots,"default")])),_:3},8,["data"]),(0,l.createElementVNode)("div",o,[(0,l.createVNode)(c,{size:"small",onClick:t[0]||(t[0]=e=>a("reload"))},{default:(0,l.withCtx)((()=>[(0,l.createTextVNode)("刷新")])),_:1}),(0,l.createTextVNode)(),(0,l.createVNode)(u,{layout:"prev, pager, next",total:e.total,background:"#00000000",onChange:t[1]||(t[1]=e=>a("change"))},null,8,["total"])])])}}});const r=n;var c=r},2596:function(e,t,a){a.r(t),a.d(t,{default:function(){return v}});var l=a(5918),o=a(1409),n=a(4809),r=a(6619),c=a(7037);const u=(0,l.createElementVNode)("span",null,"米",-1);var d=(0,l.defineComponent)({__name:"AddTransportationView",props:{modelValue:{type:Boolean},city:{}},emits:["update:model-value","reload"],setup(e,{emit:t}){const a=e,n=t,d=(0,l.toRef)(a,"modelValue"),i=(0,l.ref)({city:"",method:"",startingPrice:"",freeDistance:"",kmPrice:""}),s=(0,l.ref)(),m=async()=>{try{const e=await o.BP.getDbMap("config"),t=e.find((e=>"cityData"==e.mapKey))?.mapValue;s.value=JSON.parse(t??"[]"),console.log(s.value)}catch(e){}},p=async()=>{try{a?.city.city?await o.Dh.configBackTransportationEdit(i.value.city,i.value.method,i.value.startingPrice,i.value.freeDistance,i.value.kmPrice):await o.Dh.configBackTransportationAdd(i.value.city,i.value.method,i.value.startingPrice,i.value.freeDistance,i.value.kmPrice),(0,c.showSuccess)("success"),n("reload")}catch(e){(0,c.showError)(e.message)}};return(0,l.watch)(d,(()=>{d.value&&(m(),i.value.city=a.city.city,i.value.freeDistance=a.city.freeDistance,i.value.kmPrice=a.city.kmPrice,i.value.method=a.city.method,i.value.startingPrice=a.city.startingPrice)})),(e,t)=>{const a=(0,l.resolveComponent)("el-option"),o=(0,l.resolveComponent)("el-select"),c=(0,l.resolveComponent)("el-form-item"),d=(0,l.resolveComponent)("el-input"),m=(0,l.resolveComponent)("el-button"),v=(0,l.resolveComponent)("el-form");return(0,l.openBlock)(),(0,l.createBlock)(r.A,{"model-value":e.modelValue,onClose:t[5]||(t[5]=e=>n("update:model-value",!1))},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(v,{"label-width":"150px"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(c,{label:"城市"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(o,{modelValue:i.value.city,"onUpdate:modelValue":t[0]||(t[0]=e=>i.value.city=e)},{default:(0,l.withCtx)((()=>[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(s.value,((e,t)=>((0,l.openBlock)(),(0,l.createBlock)(a,{key:t,label:e["city-cn"],value:e.apiCity},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,l.createVNode)(c,{label:"交通方式"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(o,{modelValue:i.value.method,"onUpdate:modelValue":t[1]||(t[1]=e=>i.value.method=e)},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(a,{label:"Public",value:"Public"}),(0,l.createVNode)(a,{label:"Taxicab",value:"Taxicab"})])),_:1},8,["modelValue"])])),_:1}),(0,l.createVNode)(c,{label:"起始价格"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(d,{type:"number",min:0,modelValue:i.value.startingPrice,"onUpdate:modelValue":t[2]||(t[2]=e=>i.value.startingPrice=e)},null,8,["modelValue"])])),_:1}),(0,l.createVNode)(c,{label:"免费距离"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(d,{type:"number",min:0,modelValue:i.value.freeDistance,"onUpdate:modelValue":t[3]||(t[3]=e=>i.value.freeDistance=e)},{append:(0,l.withCtx)((()=>[u])),_:1},8,["modelValue"])])),_:1}),(0,l.createVNode)(c,{label:"超出,每公里价格"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(d,{type:"number",min:0,modelValue:i.value.kmPrice,"onUpdate:modelValue":t[4]||(t[4]=e=>i.value.kmPrice=e)},null,8,["modelValue"])])),_:1}),(0,l.createVNode)(c,null,{default:(0,l.withCtx)((()=>[(0,l.createVNode)(m,{onClick:p},{default:(0,l.withCtx)((()=>[(0,l.createTextVNode)("确定")])),_:1})])),_:1})])),_:1})])),_:1},8,["model-value"])}}});const i=d;var s=i,m=(0,l.defineComponent)({__name:"AllowListView",setup(e){const t=(0,l.ref)(1),a=(0,l.ref)(0),r=(0,l.ref)([]),c=async()=>{try{const{total:e,records:l}=await o.Dh.configBackTransportations(t.value);r.value=l,a.value=e,d.value=!1}catch(e){console.log(e.message)}};(0,l.onMounted)(c);const u=(0,l.ref)(),d=(0,l.ref)(!1),i=async()=>{u.value={},d.value=!0},m=e=>{u.value=e,d.value=!0};return(e,t)=>{const o=(0,l.resolveComponent)("el-table-column"),p=(0,l.resolveComponent)("el-button");return(0,l.openBlock)(),(0,l.createElementBlock)(l.Fragment,null,[(0,l.createVNode)(n.A,{total:a.value,data:r.value,onReload:c},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(o,{label:"ID",prop:"id"}),(0,l.createVNode)(o,{label:"交通方式",prop:"method"}),(0,l.createVNode)(o,{label:"城市",prop:"city"}),(0,l.createVNode)(o,{label:"起始价格",prop:"startingPrice"}),(0,l.createVNode)(o,{label:"免费距离",prop:"freeDistance"}),(0,l.createVNode)(o,{label:"超出价格",prop:"kmPrice"}),(0,l.createVNode)(o,null,{header:(0,l.withCtx)((()=>[(0,l.createVNode)(p,{type:"primary",size:"small",onClick:i},{default:(0,l.withCtx)((()=>[(0,l.createTextVNode)("添加")])),_:1})])),default:(0,l.withCtx)((({row:e})=>[(0,l.createVNode)(p,{type:"default",size:"small",onClick:t=>m(e)},{default:(0,l.withCtx)((()=>[(0,l.createTextVNode)("编辑")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["total","data"]),(0,l.createVNode)(s,{modelValue:d.value,"onUpdate:modelValue":t[0]||(t[0]=e=>d.value=e),city:u.value,onReload:c},null,8,["modelValue","city"])],64)}}});const p=m;var v=p}}]);