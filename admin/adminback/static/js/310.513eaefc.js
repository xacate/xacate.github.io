"use strict";(self["webpackChunkadminback"]=self["webpackChunkadminback"]||[]).push([[310],{7310:function(e,l,t){t.r(l),t.d(l,{default:function(){return N}});var o=t(5918),a=t(6581),r=t(8869),n=t(3256),d=t(1095),u=(0,o.defineComponent)({__name:"ManagerAddView",emits:["close"],setup(e,{emit:l}){const t=l,u=(0,o.ref)(""),c=(0,o.ref)(""),s=(0,o.ref)(""),{roleList:i}=(0,d.storeToRefs)((0,r.r)()),m=async()=>{if(u.value.length<4)(0,n.Q)("username is error");else if(c.value.length<=0)(0,n.Q)("rolename is error");else if(s.value.length<=0)(0,n.Q)("password is error");else try{console.log(u.value,c.value,s.value),await a.i.addAdminUser(u.value,c.value,s.value),(0,n.T)("success"),t("close")}catch(e){(0,n.Q)(e.message)}};return(e,l)=>{const t=(0,o.resolveComponent)("el-input"),a=(0,o.resolveComponent)("el-form-item"),r=(0,o.resolveComponent)("el-option"),n=(0,o.resolveComponent)("el-select"),d=(0,o.resolveComponent)("el-button"),p=(0,o.resolveComponent)("el-form");return(0,o.openBlock)(),(0,o.createBlock)(p,{"label-width":"100px"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(a,{label:"用户名"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(t,{modelValue:u.value,"onUpdate:modelValue":l[0]||(l[0]=e=>u.value=e)},null,8,["modelValue"])])),_:1}),(0,o.createVNode)(a,{label:"用户角色"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(n,{modelValue:c.value,"onUpdate:modelValue":l[1]||(l[1]=e=>c.value=e)},{default:(0,o.withCtx)((()=>[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)((0,o.unref)(i),((e,l)=>((0,o.openBlock)(),(0,o.createBlock)(r,{key:l,label:e.name,value:e.name},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,o.createVNode)(a,{label:"密码"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(t,{type:"password",modelValue:s.value,"onUpdate:modelValue":l[2]||(l[2]=e=>s.value=e)},null,8,["modelValue"])])),_:1}),(0,o.createVNode)(a,null,{default:(0,o.withCtx)((()=>[(0,o.createVNode)(d,{onClick:m},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)("确定")])),_:1})])),_:1})])),_:1})}}});const c=u;var s=c,i=(0,o.defineComponent)({__name:"ManagerEditView",props:{model:{}},emits:["close"],setup(e,{emit:l}){const t=e,r=(0,o.ref)(1),d=l,u=(0,o.toRef)(t,"model");(0,o.watch)(u,(()=>{r.value="ok"==u.value.status?1:2}),{immediate:!0,deep:!0});const c=async()=>{try{await a.i.userStatusSet(t.model.userName,r.value),(0,n.T)("success"),d("close")}catch(e){(0,n.Q)(e.message)}};return(e,l)=>{const t=(0,o.resolveComponent)("el-input"),a=(0,o.resolveComponent)("el-form-item"),n=(0,o.resolveComponent)("el-option"),d=(0,o.resolveComponent)("el-select"),u=(0,o.resolveComponent)("el-button"),s=(0,o.resolveComponent)("el-form");return(0,o.openBlock)(),(0,o.createBlock)(s,{"label-width":"100px"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(a,{label:"用户角色"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(t,{disabled:"",value:e.model.userName},null,8,["value"])])),_:1}),(0,o.createVNode)(a,{label:"用户状态"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(d,{modelValue:r.value,"onUpdate:modelValue":l[0]||(l[0]=e=>r.value=e)},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(n,{label:"正常",value:1}),(0,o.createVNode)(n,{label:"禁止",value:2})])),_:1},8,["modelValue"])])),_:1}),(0,o.createVNode)(a,null,{default:(0,o.withCtx)((()=>[(0,o.createVNode)(u,{onClick:c},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)("确定")])),_:1})])),_:1})])),_:1})}}});const m=i;var p=m;const v=(0,o.createElementVNode)("div",{class:"s-h-10"},null,-1),V={class:"flex-row flex-align-center"};var C=(0,o.defineComponent)({__name:"ManagerView",setup(e){const{isPermission:l}=(0,d.storeToRefs)((0,r.e)()),t=(0,o.ref)([]),n=(0,o.ref)(0),u=(0,o.ref)(1),c=async()=>{try{var e=await a.i.adminUsersList(u.value);console.log(e),t.value=e["users"],n.value=e["total"]}catch(l){console.log(l)}};(0,o.onMounted)((()=>{c()}));const i=(0,o.ref)(!1),m=(0,o.ref)(!1),C=(0,o.ref)({}),f=e=>{i.value=!1,C.value=e,m.value=!0},N=e=>{u.value=e,c()};return(e,a)=>{const r=(0,o.resolveComponent)("el-button"),d=(0,o.resolveComponent)("el-card"),u=(0,o.resolveComponent)("el-table-column"),h=(0,o.resolveComponent)("el-table"),w=(0,o.resolveComponent)("el-pagination"),b=(0,o.resolveComponent)("el-dialog");return(0,o.openBlock)(),(0,o.createElementBlock)("div",null,[(0,o.unref)(l)("管理员用户添加")?((0,o.openBlock)(),(0,o.createBlock)(d,{key:0,size:"small"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(r,{onClick:a[0]||(a[0]=e=>i.value=!0),type:"primary",size:"small"},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)("增加")])),_:1})])),_:1})):(0,o.createCommentVNode)("",!0),v,(0,o.createVNode)(h,{strip:"",border:"",data:t.value,size:"small"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(u,{label:"ID",prop:"id"}),(0,o.createVNode)(u,{prop:"userName",label:"用户名"}),(0,o.createVNode)(u,{prop:"userRole",label:"角色"}),(0,o.createVNode)(u,{prop:"updatedBy",label:"更新人"}),(0,o.createVNode)(u,{prop:"googleAuth",label:"google是否验证"}),(0,o.createVNode)(u,{prop:"status",label:"status"}),(0,o.createVNode)(u,{prop:"certAuth",label:"证书验证"}),(0,o.createVNode)(u,{prop:"passwordPrimeval",label:"密码是否验证"}),(0,o.createVNode)(u,{prop:"createdTime",label:"createdTime"}),(0,o.createVNode)(u,{prop:"updatedTime",label:"updatedTime"}),(0,o.createVNode)(u,{prop:"deletedTime",label:"deletedTime"}),(0,o.createVNode)(u,null,{default:(0,o.withCtx)((({row:e})=>[(0,o.unref)(l)("管理员状态设置")?((0,o.openBlock)(),(0,o.createBlock)(r,{key:0,size:"small",type:"primary",onClick:l=>f(e)},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)("编辑")])),_:2},1032,["onClick"])):(0,o.createCommentVNode)("",!0)])),_:1})])),_:1},8,["data"]),(0,o.createElementVNode)("div",V,[(0,o.createVNode)(r,{size:"small",onClick:c},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)("刷新")])),_:1}),(0,o.createTextVNode)(),(0,o.createVNode)(w,{layout:"prev, pager, next",total:n.value,background:"#00000000",onChange:N},null,8,["total"])]),(0,o.createVNode)(b,{modelValue:i.value,"onUpdate:modelValue":a[2]||(a[2]=e=>i.value=e),title:"添加管理员"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(s,{onClose:a[1]||(a[1]=e=>(i.value=!1,c()))})])),_:1},8,["modelValue"]),(0,o.createVNode)(b,{modelValue:m.value,"onUpdate:modelValue":a[4]||(a[4]=e=>m.value=e),title:"修改管理员状态"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(p,{onClose:a[3]||(a[3]=e=>(m.value=!1,c())),model:C.value},null,8,["model"])])),_:1},8,["modelValue"])])}}});const f=C;var N=f}}]);