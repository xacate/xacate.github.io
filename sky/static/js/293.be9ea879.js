"use strict";(self.webpackChunkskyweb=self.webpackChunkskyweb||[]).push([[293],{40293:function(e,l,t){t.r(l),t.d(l,{default:function(){return F}});var a=t(20641),s=t(90033),o=t(50953),i=t(53751),r=t(72903),u=t(5521),c=t(40349),n=t(50716),d=t(63863),v=t(87652),f=t(5615),k=t(50157),A=t(45751),y=t(48596),p=t(90879);const g={class:"h-1 scroll position-re tk-p-20 tk-fs-13"},_={class:"tk-fs-18"},h={class:"tk-fs-12"},m={class:"tk-fs-12"},b={class:"tk-fs-12"},w={class:"flex-row flex-just-end tk-m-t-16"},R={class:"tk-m-t-60"},$={class:"tk-fs-18"},L={class:"tk-fs-14 color-detail-color"},x={class:"tk-fs-14 color-detail-color"},K={class:"flex-1 s-line-1 tk-p-r-10"},V=["src"],C={class:"tk-m-t-14"},B={class:"color-detail-color tk-fs-12"},E={class:"tk-w-200 tk-h-200"},U={class:"tk-fs-12"},j={class:"color-detail-color"},W={class:"flex-row flex-just-end tk-m-t-16"};var F=(0,a.pM)({__name:"secret",setup(e){var l=t(87583);const{useMobile:F}=(0,f.bP)((0,d.pp)()),{userInfo:S}=(0,f.bP)((0,v.P)()),Y=(0,o.KR)(0),Q=e=>{if(!(e.length>3))return(0,n.$t)("$vuetify.login_email_code")},z=e=>{if(!(e.length>5))return(0,n.$t)("$vuetify.login_password_rule_title")},I=e=>{if(!(e.length>6))return(0,n.$t)("$vuetify.login_account_rule_title")},J=(0,o.KR)(S.value.email),X=(0,o.KR)(""),D=(0,o.KR)(""),H=(0,o.KR)(),P=(0,o.KR)(),M=(0,o.KR)();let T=0;const q=async e=>{if(H.value.validate()){try{await A.clientApi.userApi.sendCodeByEmail(J.value),(0,y.rW)((0,n.$t)("$vuetify.login_send_email_code"),"success"),(0,c.L8)((e=>((0==T||e-T>60)&&(T=e),Y.value=60-(e-T),e-T>60)))}catch(e){(0,y.rW)(e.message)}e()}else e()},G=(0,o.KR)(),N=(0,o.KR)(""),Z=(0,o.KR)(""),O=(0,o.KR)(""),ee=(0,o.KR)(!1),le=async()=>{try{const{qrCodeText:e,secretKey:t}=await A.clientApi.userApi.getGoogleSecretKey();Z.value=e,N.value=t,(async()=>{await(0,c.cP)((async()=>!!G.value)),l.toCanvas(G.value,Z.value??"--",{margin:1,width:180,height:180},(function(e){e&&(0,y.rW)(e)}))})()}catch(e){(0,y.rW)(e.message)}};(0,a.sV)((()=>{k.J.getUserValidateSetWeb().then((e=>{e&&(ee.value="no"!==k.J.authInfo.google)})),le()}));const te=async e=>{if(H.value.validate()&&P.value.validate()&&M.value.validate()){try{await A.clientApi.userApi.resetPasswordByEmail({email:J.value,code:X.value.trim(),password:D.value,repassword:D.value}),X.value="",D.value="",(0,y.Eg)()}catch(e){(0,y.rW)(e.message)}e()}else e()},ae=()=>{(0,p.hR)(N.value)},se=async e=>{try{await A.clientApi.userApi.addGoogleSecretKey({secretKey:N.value,code:O.value}),(0,y.Eg)()}catch(e){(0,y.rW)(e.message)}e()};return(e,l)=>((0,a.uX)(),(0,a.CE)("div",g,[(0,a.Lk)("div",null,[(0,a.Lk)("div",_,(0,s.v_)((0,o.R1)(n.$t)("$vuetify.login_forget_title")),1),l[4]||(l[4]=(0,a.Lk)("div",{class:"tk-m-v-12",style:{"border-top-style":"dashed","border-top-width":"1px","border-top-color":"#aaaaaa55"}},null,-1)),(0,a.Lk)("div",h,[(0,a.bF)(u.A,{style:(0,s.Tr)({width:(0,o.R1)(F)?"100%":"50%"}),ref_key:"emailRef",ref:H,modelValue:J.value,"onUpdate:modelValue":l[0]||(l[0]=e=>J.value=e),placeholder:(0,o.R1)(n.$t)("$vuetify.login_account_rule_title"),rules:I},null,8,["style","modelValue","placeholder"])]),(0,a.Lk)("div",m,[(0,a.bF)(u.A,{style:(0,s.Tr)({width:(0,o.R1)(F)?"100%":"50%"}),ref_key:"emailCodeRef",ref:P,modelValue:X.value,"onUpdate:modelValue":l[1]||(l[1]=e=>X.value=e),placeholder:(0,o.R1)(n.$t)("$vuetify.login_email_code"),rules:Q},{btn:(0,a.k6)((()=>[(0,a.bF)(r.A,{class:"tk-m-l-5 tk-fs-12",onHandler:q,title:Y.value>0?(0,o.R1)(n.$t)("$vuetify.left_sec_second",{code:Y.value}):(0,o.R1)(n.$t)("$vuetify.login_get_email_code")},null,8,["title"])])),_:1},8,["style","modelValue","placeholder"])]),(0,a.Lk)("div",b,[(0,a.bF)(u.A,{style:(0,s.Tr)({width:(0,o.R1)(F)?"100%":"50%"}),ref_key:"passwordRef",ref:M,type:"password",rules:z,modelValue:D.value,"onUpdate:modelValue":l[2]||(l[2]=e=>D.value=e),placeholder:(0,o.R1)(n.$t)("$vuetify.login_password_rule_title")},null,8,["style","modelValue","placeholder"])]),(0,a.Lk)("div",w,[(0,a.bF)(r.A,{onHandler:te,color:"#ffffff",title:(0,o.R1)(n.$t)("$vuetify.confirmEdit.ok"),ground:"rgb(50, 112, 232)",class:"pointer tk-p-h-20 color-blue tk-p-v-5 tk-br-5"},null,8,["title"])])]),l[6]||(l[6]=(0,a.Lk)("div",{class:"tk-m-t-20 tk-h-10 position-ab",style:{left:"0",right:"0","background-color":"#00000055"}},null,-1)),(0,a.Lk)("div",R,[(0,a.Lk)("div",$,(0,s.v_)((0,o.R1)(n.$t)("$vuetify.settings_sub_v")),1),(0,a.Lk)("div",L,(0,s.v_)((0,o.R1)(n.$t)("$vuetify.settings_open_sub_v")),1),l[5]||(l[5]=(0,a.Lk)("div",{class:"tk-m-v-12",style:{"border-top-style":"dashed","border-top-width":"1px","border-top-color":"#aaaaaa55"}},null,-1)),(0,a.Lk)("div",x,(0,s.v_)((0,o.R1)(n.$t)("$vuetify.settings_copy_user_t")),1),(0,a.Lk)("div",{class:"flex-row tk-m-t-8 tk-br-6 flex-align-center tk-p-h-10 tk-h-40 flex-just-between color-back-ae",style:(0,s.Tr)({width:(0,o.R1)(F)?"100%":"60%"})},[(0,a.Lk)("span",K,(0,s.v_)(N.value),1),(0,a.Lk)("img",{onClick:ae,class:"tk-h-20 pointer",src:t(51985),alt:""},null,8,V)],4),(0,a.Lk)("div",C,[(0,a.Lk)("span",B,(0,s.v_)((0,o.R1)(n.$t)("$vuetify.settings_t_t")),1),(0,a.Lk)("div",E,[(0,a.Lk)("canvas",{ref_key:"canvasRef",ref:G},null,512)])]),(0,a.Lk)("div",U,[(0,a.Lk)("span",j,(0,s.v_)((0,o.R1)(n.$t)("$vuetify.wallet_google_code")),1),(0,a.Lk)("div",{class:"color-back-ae tk-m-t-6 tk-br-6 flex-just-between tk-p-h-18 tk-h-40 flex-row flex-align-center",style:(0,s.Tr)({width:(0,o.R1)(F)?"100%":"50%"})},[(0,a.bo)((0,a.Lk)("input",{class:"tk-fs-15",type:"text","onUpdate:modelValue":l[3]||(l[3]=e=>O.value=e)},null,512),[[i.Jo,O.value]])],4)]),(0,a.Lk)("div",W,[(0,a.bF)(r.A,{onHandler:se,color:"#ffffff",ground:"rgb(50, 112, 232)",title:(0,o.R1)(n.$t)("$vuetify.wallet_save_type")},null,8,["title"])])])]))}})},51985:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAC/SURBVHgB7ZbhCcIwEIVfQgboCBmhIziCGziDE6gbuEFX0AmKE5gNmg0c4bxgBZFcW8i1P0o/eAQuJC8h4e4AASLyrJbK6NI+GDBpSIenhYyHDrXFAqzHxPHDVDyeWHUfexhjzlDEsRrW/icWoYz9M5iF7XdtJis0qaBMzuSbXu7Q4eYywVQRd5y/rqnioCwjBNYFQjV7sQ5QwvSnlYiYnjAD3/6Ym3AjCz0UyvBiXzhAhyjO0Ke/6qiMlgb6qzeBKxVSMJyrPwAAAABJRU5ErkJggg=="}}]);