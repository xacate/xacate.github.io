"use strict";(self.webpackChunkskyweb=self.webpackChunkskyweb||[]).push([[783],{5298:function(e,l,a){a.r(l),a.d(l,{default:function(){return N}});a(4114),a(1454);var t=a(5918),o=a(5756),r=a(6210),n=a(1736),c=a(2099),m=a(7113),i=a(5220),v=a(5243),s=a(1833),u=a(3863),p=a(349),d=a(3088);const k={class:"tk-h-40 flex-row"},f=["src"],g={class:"tk-p-v-10 flex-row flex-just-between flex-wrap",style:{gap:"0.7rem"}},h=["onClick"],y={href:"",class:"game-empty"},w={key:1,class:"max-width tk-p-v-10 tk-p-h-10"};var B=(0,t.defineComponent)({__name:"GameView",setup(e){const{getCategoryList:l,getGameList:B}=(0,m.b)(),N=(0,u.Cg)(),V=(0,t.ref)([]),b=(0,t.ref)("Self-developed"),C=(0,t.ref)(!0),E=(0,t.ref)(!0),T=(0,i.lq)(),x=(0,t.ref)(!1),S=(0,t.ref)({name:"Self-developed",mark:"Self-developed",type:"Self-developed"}),A=(0,t.ref)([]),D=async()=>{E.value=!0,B(b.value,S.value.name).then((e=>{E.value=!1,A.value=e.map((e=>({img:e.icon,gameName:e.gameName,gameType:e.gameType,gameUid:e.gameUid,gamePlatform:e.gamePlatform,platformType:e.platformType})))}))};(0,t.onUnmounted)((()=>{V.value=[]}));const _=(0,t.ref)(),L=(0,t.ref)(null),P=()=>{if(!L.value)return;if(_.value&&!_.value.isClose())return void _.value.close();const e=L.value.getBoundingClientRect();_.value=(0,s.AF)({left:e.left,top:e.top+e.height+5,width:200},V.value.map(((e,l)=>({label:e.name,value:e.mark,idx:l}))),(e=>{S.value.name=e.label,S.value.mark=e.value,S.value.type=b.value,D()}))},U=(0,t.ref)(),F=e=>{U.value&&N.setScrollTop(b.value,U.value.scrollTop)};return(0,t.onMounted)((async()=>{U.value&&(await(0,p.cP)((()=>U.value.scrollHeight>N.getScrollTop(b.value))),U.value.scrollTop=N.getScrollTop(b.value))})),(0,t.watch)(T,(()=>{"tradeView"!==T.params.name?(x.value=!1,async function(){V.value.length=0,C.value=!0;const e=T.params.name;b.value=e,l(e).then((l=>{C.value=!1,V.value=l.map((l=>({name:l,type:e,mark:l}))),V.value.length>0&&(S.value=Object.assign({},V.value[0]),D())}))}()):x.value=!0}),{immediate:!0}),(e,l)=>{const m=(0,t.resolveDirective)("lazy"),i=(0,t.resolveDirective)("loading");return(0,t.openBlock)(),(0,t.createElementBlock)("div",{class:"w-1 h-1 scroll tk-p-b-15",ref_key:"gameScrollRef",ref:U,onScroll:F},[(0,t.createVNode)(o.A),x.value?(0,t.createCommentVNode)("",!0):(0,t.withDirectives)(((0,t.openBlock)(),(0,t.createElementBlock)("div",{key:0,class:(0,t.normalizeClass)([C.value?"tk-h-300":"","max-width tk-p-h-10"])},[(0,t.createElementVNode)("div",k,[(0,t.createElementVNode)("div",{ref_key:"platformRef",ref:L,class:"color-menu flex-row flex-align-center tk-p-h-15 tk-br-8 pointer",onClick:P},[(0,t.createTextVNode)((0,t.toDisplayString)(S.value.name)+" ",1),(0,t.createElementVNode)("img",{src:a(4287),alt:""},null,8,f)],512)]),(0,t.withDirectives)(((0,t.openBlock)(),(0,t.createElementBlock)("div",g,[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(A.value,((e,l)=>((0,t.openBlock)(),(0,t.createElementBlock)("div",{key:l,onClick:l=>(e=>{v.A.push(`/game/${e.gameType}/${e.gamePlatform}/${e.gameUid}`)})(e),class:"position-re item tk-br-8",style:{overflow:"hidden",display:"block"}},[(0,t.withDirectives)(((0,t.openBlock)(),(0,t.createElementBlock)("img",{key:e.img,class:"w-1 h-1 tk-br-8",alt:""})),[[m,e.img]])],8,h)))),128)),((0,t.openBlock)(),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)([1,2,3,4,5,6,7,8,9],((e,l)=>(0,t.createElementVNode)("a",y))),64))])),[[i,E.value]])],2)),[[i,C.value]]),x.value?((0,t.openBlock)(),(0,t.createElementBlock)("div",w,[(0,t.createVNode)(d.A)])):(0,t.createCommentVNode)("",!0),(0,t.createVNode)(c.A),(0,t.createVNode)(r.A),(0,t.createVNode)(n.A),l[0]||(l[0]=(0,t.createElementVNode)("div",{class:"tk-h-20"},null,-1))],544)}}});var N=(0,a(6262).A)(B,[["__scopeId","data-v-6a3d7459"]])}}]);